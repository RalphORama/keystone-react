# Keystone + React

[![Code Style](https://badgen.net/badge/code%20style/airbnb/ff5a5f?icon=airbnb)](https://github.com/airbnb/javascript)

![Engagement lab logo](https://i.imgur.com/ZfiACOF.png)

Developed for the [Emerson College Engagement Lab](https://elab.emerson.edu/)


## About

This project integrates ReactJS and Webpack with KeystoneJS.  Keystone uses the `webpack-dev-middleware` and `webpack-hot-middleware` to serve the files generated by Webpack and provide hot module replacement.

In production, Keystone serves the files compiled by Webpack (stored in `public/`) with `@keystonejs/app-static`.

Keystone provides a GraphQL API which can be queried by your React frontend.  See Keystone's [GraphQL API Docs](https://v5.keystonejs.com/guides/intro-to-graphql) for more information.

This project comes pre-loaded with the Apollo GraphQL client for React.  See [Getting Started with Apollo](https://www.apollographql.com/docs/react/get-started/#create-a-client) for usage information.


## Code Style

By default, this project uses eslint + the [AirBNB code style](https://github.com/airbnb/javascript).  If you don't want this functionality, delete the `.eslintrc.json` files in `/` and `/client`, or modify them to use the code style guide you prefer.


## Project Structure

- `/`: Standard Keystone and project assets.
  - `server.js`: Modified Keystone server instance
  - `index.js`: Standard Keystone server configuration
- `client`: Source for the React front-end
  - `public`: Folder for static resources
- `public`: Output folder for Webpack


## Running the Project

1. Run `yarn install`
2. Run `npm run dev`

Once running, the Keystone Admin UI is reachable via `localhost:3000/admin`.  The public site is reachable at `localhost:3000`.

To build your own GraphQL API, visit `localhost:3000/admin/graphiql`.


## Building the Project

**NB:** This workflow will probably change in the future.

1. Execute `npm run webpack`
2. Execute `npm run build`

Until these instructions change, this will create a development build of React in the `public` folder.  There is currently no production webpack config, but you could write one yourself.  Production functionality Coming Soon&trade;.


## To-Do

- [ ] Update build script to run Webpack as well.
- [ ] Write Webpack production config.
